$schema: https://json-schema.org/draft-07/schema#
type: object
patternProperties:
  ^[a-zA-Z0-9_]+$:
    type: object
    required:
      - id
      - event_types
      - potential_targets
      - priority
    additionalProperties: false
    properties:
      id:
        type: integer
        minimum: 0
        maximum: 65535
        description: Unique identifier for the action
      priority:
        type: integer
        minimum: 0
        maximum: 255
        description: Higher priority means the events connected to this action will take effect over others
      event_types:
        type: array
        items:
          oneOf:
            - type: object
              required: [ Damage ]
              properties:
                Damage:
                  type: object
                  required: [ amount, damage_types, target ]
                  properties:
                    amount:
                      type: integer
                      minimum: 0
                      maximum: 65535
                    damage_types:
                      type: array
                      items:
                        $ref: '#/definitions/damageType'
                      uniqueItems: true
                    target:
                      $ref: '#/definitions/eventTarget'
            - type: object
              required: [ Heal ]
              properties:
                Heal:
                  type: object
                  required: [ amount, target ]
                  properties:
                    amount:
                      type: integer
                      minimum: 0
                      maximum: 65535
                    target:
                      $ref: '#/definitions/eventTarget'
      potential_targets:
        type: array
        items:
          $ref: '#/definitions/actionTarget'
        uniqueItems: true
      costs:
        type: array
        items:
          type: object
          required: [ resource, amount ]
          properties:
            resource:
              $ref: '#/definitions/resourceType'
            amount:
              type: integer
              minimum: 0
              maximum: 65535
        uniqueItems: true
definitions:
  damageType:
    type: string
    enum:
      - Piercing
      - Bludgeoning
      - Slashing
      - Fire
      - Frost
      - Thunder
      - Light
      - Dark
  actionTarget:
    type: string
    enum:
      - None
      - OneSelf
      - SpecificAlly
      - SpecificOpponent
      - EveryAllyExceptSelf
      - EveryAllyIncludingSelf
      - EveryOpponent
  eventTarget:
    type: string
    enum:
      - SourceMonster
      - SourceTeam
      - TargetMonster
      - TargetTeam
  resourceType:
    type: string
    enum:
      - Momentum
      - Energy
      - Hp